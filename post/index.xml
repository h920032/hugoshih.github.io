<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Hsing-Yu Shih</title><link>https://www.hugoshih.com/post/</link><description>Recent content in Posts on Hsing-Yu Shih</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 05 Dec 2022 09:00:18 +0800</lastBuildDate><atom:link href="https://www.hugoshih.com/post/index.xml" rel="self" type="application/rss+xml"/><item><title>一個普通人的Google面試經驗</title><link>https://www.hugoshih.com/p/%E4%B8%80%E5%80%8B%E6%99%AE%E9%80%9A%E4%BA%BA%E7%9A%84google%E9%9D%A2%E8%A9%A6%E7%B6%93%E9%A9%97/</link><pubDate>Mon, 05 Dec 2022 09:00:18 +0800</pubDate><guid>https://www.hugoshih.com/p/%E4%B8%80%E5%80%8B%E6%99%AE%E9%80%9A%E4%BA%BA%E7%9A%84google%E9%9D%A2%E8%A9%A6%E7%B6%93%E9%A9%97/</guid><description>&lt;img src="https://imgur.com/N6UT0BQ" alt="Featured image of post 一個普通人的Google面試經驗" />&lt;h1 id="一個普通人的google面試經驗">一個普通人的Google面試經驗&lt;/h1>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>大學時期正處AI技術火熱發展的幾年，也因此經常有媒體報導AI技術領頭的Google的工作環境，像遊樂場一般的辦公室、吃不完的零食和飲料、五星級的免費三餐、領著百萬年薪上班還可以想睡覺就睡覺，其內部夢幻的刷新我對一份工作的三觀，從那時起對這間公司逐漸產生好奇，儘管好奇，我卻一直抱持著觀望的心態，如此夢幻的企業收人的標準想當然也是異常的高，傳言中只收台大電資的書卷大神或是競賽選手，望向我那慘慘的在校成績，完全不敢想像要如何才能拿到進入Google的門票。&lt;/p>
&lt;p>大四那年系上開了企業參訪，地點就是朝思暮想的Google，當下毫不猶豫就報名了，就此開啟了與Google的第一次相遇的緣分，那時候板橋的總部還沒有成立，我們參觀的是位於101的總部，隨著前往76樓的電梯快速上升，興奮的心情難以壓抑，電梯們打開的剎那，迎接我的是我朝思暮想的夢幻國度，原來新聞裡講的都是真的，免費的冰、免費的飲料、免費的五星級三餐，搭配著76樓的高空美景，真有種去度假的感覺，遊樂器材、打盹房也是真的，完全體現了Google對員工的信任，在與帶領我們的員工交流後了解到Google對員工管理的自由，不僅僅是工時上的自由，工作項目上員工也有相當大的主導權，員工甚至可以自行組建小組發起專案，就這樣在震撼中結束了與Google的第一次邂逅，從那之後進入Google成了我的夢想，我深知自己的不足，只能一步步的朝那裡邁進。
&lt;img src="https://i.imgur.com/me7lhlC.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/N6UT0BQ.jpg"
loading="lazy"
>&lt;/p>
&lt;p>大四的暑假有了一次前往美國舊金山的機會，趁著這個機會再次造訪心中的夢想之地，位在山景城的Google總部，不過這次比較可惜沒有人脈可以帶我進去參觀參觀，只能當個觀光客在園區閒晃，雖然說只能從外部看，也能感受到整間公司以Have Fun為中心思想的氛圍，隨處可見的腳踏車、沙灘排球場、還有各式各樣的野餐區域簡直就是個大型的度假中心，後來也去了園區附近的紀念品中心買了不少伴手禮回來，朝聖之旅讓我感受的這間公司迷人的活力與矽谷這個科技業的傳奇之地的魅力，這裡的創造力與帶給世界的改變，我心想未來的某一天，我也希望能來到這裡工作。
&lt;img src="https://i.imgur.com/d6fIhVp.jpg"
loading="lazy"
>&lt;/p>
&lt;p>回台灣之後進入了研究所就讀，原本就對自己的技術能力不太抱有信心，進入研究所後被各路大神強者環繞，更是讓我深切的感受到想要進入Google還有很長的路要走，在技術能力與研究能力上必須要有更上一層的累積，抱持著這個心態，在被研究進度追趕之餘也儘可能的參與各式各樣的side project、hackathon，也參與了幾個新創專案累積了一些參與新創的經驗，在跌跌撞撞之中夾雜著過人的運氣，在研究所的最後一年極度幸運的拿到了微軟的實習機會，開啟了一年的實習與研究所兩邊跑的生活，儘管這個老牌的軟體公司在Google、Facebook這些當紅的網路公司略顯遜色，但作為老牌卻長青的科技巨頭，仍提供了我不少的成長養分，開發技術能力的提升、專案管理能力的培養，也讓我得以窺見在科技公司中的生活模式。&lt;/p>
&lt;p>2021年板橋的Google成立，將會是亞洲最大的硬體研發中心，能預期的是Google在台灣將會有大規模的人才招募活動，進入Google的難度也會較以往稍微容易，我深知想要進入Google這是個非常好的機會，在2021年底我在Linkedin上第一次收到來自Google HR的面試邀約，在與HR面談後了解到這是屬於Google Silicon的Hardware Engineer職缺，招募台灣電機背景或是有硬體開發經驗的工程師，只可惜我完全沒有學過硬體設計，對於verilog是一竅不通，面談後就完全沒有後續消息了&amp;hellip;&lt;/p>
&lt;p>2022年初聽聞有個學弟進入Google，我厚著臉皮請他幫忙推薦並投了2022年度的Software Engineer校園招募，這一次我總算沒有被拒於門外，順利的拿到了第一次面試的機會，就這樣開始了魔王級的面試挑戰之旅。&lt;/p>
&lt;h2 id="背景">背景&lt;/h2>
&lt;p>112資管系雙主修森林系學士+112電信所碩士，沒有參加過程式競賽，也沒有貢獻過開源專案，只有和幾個朋友做過Side Project和Hackathon，大二修程式設計時因為花太多時間在社團而被當掉，大三重修A+過，資結演算法只能說是普通水準。&lt;/p>
&lt;h2 id="準備">準備&lt;/h2>
&lt;p>差不多從2021年12月左右開始刷題，中間有一段時間在趕研究進度跟過年荒廢了一段時間，過完年後為了要強迫自己刷題買了一年份的Leetcode Premium，現在看起來是很不錯的投資，另外我也有買很多人推薦的&lt;a class="link" href="https://www.books.com.tw/products/0010881287?gclid=CjwKCAjws8yUBhA1EiwAi_tpEc7PyWvICvGCthzmnsrYVvP4OFhBHxPSQ-XjgJoZy5Ampx9c_pKHlxoC-NUQAvD_BwE" target="_blank" rel="noopener"
>Cracking the coding interview&lt;/a>不過只有看一兩個不太熟的章節而已，刷題的策略前期我自己是從動態規劃開始練習，那時候是看花花醬的&lt;a class="link" href="https://www.youtube.com/watch?v=LG0adDNnnYg&amp;amp;list=PLLuMmzMTgVK6krji67w8tEAAud71nQQFe" target="_blank" rel="noopener"
>動態規劃終極學習方案&lt;/a>系列影片累積思考動態規劃問題的技巧，差不多二月開始開始以寫完Leetcode前100題為目標，首先從Easy開始，然後是Medium，三月時開始以寫完&lt;a class="link" href="https://leetcode.com/discuss/general-discussion/460599/blind-75-leetcode-questions" target="_blank" rel="noopener"
>Blind 75&lt;/a>為目標，刷完一遍Blind 75後在去看前100題中的Hard題，最後在Onsite前一週努力刷Google面試的高頻率題，不得不說Leetcode Premium都將高頻題整理好了真的蠻方便的(而且真的蠻有用的XD)，這段期間每天會固定上去寫Daily，算是強迫自己每天維持解題手感，刷的題目數量，在Phone Interview前差不多150題左右，在Onsite之前差不多230題左右，相對於各路大神來說應該不算多，不過對我自己而言還算夠，各方面的題型都算是有顧到，自己的感覺是都能夠穩定的解出Medium，Hard則是可以想出可行解。比較可惜的是這段時間沒有找朋友幫忙Mock interview，面試經驗的累積是靠實戰累積，在這之前還面了Amazon、Nvidia。
因為Google的Technical Interview至少會有兩關以上的全英文面試，英文也是很重要的一部分，雖然不用到Native specker那樣流利，但至少邏輯要能正確傳達，我英文的部分主要就仰賴實習的時候累積下來的，抱括日常聊天用語與解釋技術的能力，很感謝在這段時間願意跟我交流和我練習英文的人。
&lt;img src="https://i.imgur.com/9Pq3Dv9.png"
loading="lazy"
>
這一段時間的刷題紀錄&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/svYL759.png"
loading="lazy"
>
刷題的三圍&lt;/p>
&lt;h2 id="時辰">時辰&lt;/h2>
&lt;p>2022/01/20 -&amp;gt; 收到朋友的內推通知信，官網投遞履歷，投的是Software Engineer, University Graduate, 2022
2022/03/07 -&amp;gt; 收到HR來信通知安排面試
2022/03/28 -&amp;gt; Phone Interview
2022/04/07 -&amp;gt; 通知通過Phone Interview，準備安排Virtual Onsite Interview
2022/04/25 -&amp;gt; 第一天Virtual Onsite Interview，兩關Technical Interview + 一關Behavior Interview
2022/04/26 -&amp;gt; 第二天Virtual Onsite Interview，兩關Technical Interview
2022/05/07 -&amp;gt; 通知面試結果most on positive
2022/05/26 -&amp;gt; 得知Hiring政策可能會異動&lt;/p>
&lt;h2 id="過程">過程&lt;/h2>
&lt;p>要說面試有什麼最需要注意的，我會覺得是要保持平常心，這也是我認爲面試最困難的部分，畢竟在跟自己的夢想公司面試，興奮、期待、緊張等情緒交雜，很難保持平常心，在第一次Phone Interview時我甚至前兩天晚上都緊張到睡不著，能做的就是去Youtube上找各種國外講軟體工程師面試的影片來看，提醒自己面試該注意的點，英文類的也順便可以練習英文聽力，以下推薦幾個不錯的影片：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=4tbQhdrpB9s" target="_blank" rel="noopener"
>面試流程大解析&lt;/a>，用SOP的方式講解軟體工程師面試，淺顯易懂&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=4yznKC5ZE5I&amp;amp;t=129s" target="_blank" rel="noopener"
>Google谷歌技术面试经验分享&lt;/a>，這個講解面試的過程與注意事項講的很仔細，很有參考價值&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=ASXM4-CQG8o" target="_blank" rel="noopener"
>How to tech interview Like a Pro&lt;/a>，這個用搞笑的方式呈現程式面試的過程，蠻有趣的&lt;/li>
&lt;/ul>
&lt;h3 id="phone-interview">Phone Interview&lt;/h3>
&lt;p>我差不多在預定時間的前十分鐘就坐在電腦前等，不過在預定時間點進去時面試官還沒上來，讓我緊張了一下以爲是不是記錯時間，等了差不多十分鐘後面試官終於來了，很抱歉的表示因為前面有一個會有一點耽擱到。面試官其實是一個親切的中國的小姊姊，一開始問了一個類似字串比對的問題，差不多是Easy等級，基本上一看到題目想到解法了，陳述了解法後面試官也同意這個解法，就花了10分鐘左右完成這題的coding，接著他表示有Follow up，比較像是會重複使用到第一題的概念屬於Medium等級，在思考這題的時候我原本以為只需要重複使用第一題的解法就行，結果發現我第一題使用的解法並非最佳解，到這邊其實有一點慌了，還好小姊姊人很好，不斷引導我去思考更好的解法，最終想出一個更佳的解法並花了幾分鐘實現，面試結束前小姊姊表示其實還有更好的解法，因此又花了幾分鐘請教一下，不過他表示這個解法他自己也沒有想到。
個人評價，整體來說面試表現還行，解題並不是很流暢，中間卡了一下，但算是有解出來，所以也不到差。
後來是通過了這一輪面試。&lt;/p>
&lt;h3 id="onsite-interview">Onsite Interview&lt;/h3>
&lt;h4 id="technical-interview-1">Technical Interview #1&lt;/h4>
&lt;p>這一關是一個人很不錯的中國的大叔，也沒有遲到，問了一題排序的變化題，一開始以為是Easy，但實際解下去後發現有Medium難度，完全錯估了這題的深奧程度，最一開始提了一個可行解，但面試官希望我提出最佳解，就這樣在這討論解法的30min中我至少提出了五六種解法，並分析在輸入範圍不同的情況下複雜度的差異，但我都沒有提出最佳解，後來在面試官的提示下想出了最佳解，但時間基本上已經用完了，我只能快速的將想法實作出來，後來想想自己實作的演算法是有Bug的，還好面試官人很好，並沒有很急著要結束面試，反而盡可能多留一些時間讓我完成面試，最後面試官回應我認為這是個很有趣的討論，認爲我提出了許多有趣的想法。
有了Phone Interview的經驗後，並沒有讓我比較不緊張，反而一直很擔心面試官一上來就會來一題Hard，就面試情形而言自己覺得表現是比較糟糕的。&lt;/p>
&lt;h4 id="technical-interview-2">Technical Interview #2&lt;/h4>
&lt;p>這一關是一個懶得說話的小哥，問了一個類似尋找子字串的問題，他先請我思考一個brute force solution我基本上看完題目就有想法直接給出了解法，他聽完後也覺得可以因此就請我實作，我差不多花十分鐘實作完成並解釋了一下時間複雜度，接著希望我提出最佳解，對於最佳解自己其實沒什麼把握，只感覺字串應該可以用prefix tree來處理，因此提出了自己想法，沒想到他回應這是正確的思路，因此接續的想就給出了最佳解，還算順利的完成這一關，難度大概是Medium。
在第一關爆掉之後這關心情反而輕鬆許多，有一點隨他去的感覺，大概是因為心情放鬆不少，反而思緒比較清楚，果然緊張才是大魔王。&lt;/p>
&lt;h4 id="behavior-interview">Behavior Interview&lt;/h4>
&lt;p>這一關是一個中國的姊姊面試，首先問了一些蠻常見的Behavior question像是團隊的合作以及如何溝通，詳細題目網路上有蠻詳細的資訊，比較特別的是面試官問了一題有點類似產品設計的題目，因為事前完全沒有預料到，只能憑想像回答，但感覺面試官似乎沒有很滿意，面試最後有給個feedback認為我回答的沒有很深入，但他覺得我可能缺少工作經驗，因此回答的不深入也算預料之內。
整體來說回答的算尚可，至少都有給出個穩健中庸的答案。&lt;/p>
&lt;h4 id="technical-interview-3">Technical Interview #3&lt;/h4>
&lt;p>第三關開始就變成了用英文面試，面試官還是中國小哥，不得不說跟同樣母語是中文的人用英文溝通難度真的低很多，可能是因為背後的思考還卡在中文的框架下。
面試官問了一個tree traverse然後output路徑的題目，高度相似於leetcode上某題Google高頻題，剛好前幾天刷題有寫到，幾乎是秒想出最佳解，當然看到原題還是很興奮的，大概花了15分鐘講解完以及寫完code之後面試官給了我一個follow up，表面上是上面這題的延伸，但實際上已經轉換成BFS尋找兩點最短路徑的題目，還算是有趣的Follow up，這個變化在leetcode上就找不到了，這題同樣也是medium難度。&lt;/p>
&lt;h4 id="technical-interview-4">Technical Interview #4&lt;/h4>
&lt;p>第四關是一個沒有什麼表情的中國小哥，問了一個類似blind 75 pacific atlantic water flow的題目，看完題目後第一反應就連想到blind 75這題，事後也證明用同一題的方法可以解決這題，大概花了20分鐘講解跟寫完code後面試官同樣也給了follow-up，不過這個follow-up就沒有前一關有趣，只是單純數量上的增加，用同一題的方法改一下code就解決了，這題難度大概Medium。結果後來反而是這關的面試官認為我寫的code有些微的瑕疵，果然看到熟悉的題目還是不能太大意啊。&lt;/p>
&lt;h2 id="後續">後續&lt;/h2>
&lt;p>我面試的時間已經算是Google 2022Campus Hire的末端了，大部分的缺都已經招完了，所以後來就變成直接沒有Headcount可以進行Team match，因此那時就有心理準備可能會需要等到下一年度的campus hire在繼續。&lt;/p>
&lt;p>後來就如同大家所見的，在美國升息的壓力下各大公司開始被迫精簡人力，台灣這邊的campus hire也延到11月才開始，而headcount也必須要等到明年初人力政策確定後才會比較確定，好在面試結果可以保留一年，就祈禱明年還有機會可以繼續進行面試流程。&lt;/p>
&lt;p>雖然尚未成功的進入我的Dream company，但這一路上還是很感謝許多人提供的機會以及幫助，此外也感謝協助我的Google HR不厭其煩的提供招聘流程的各種資訊。&lt;/p></description></item><item><title>玩遍老鏡頭 - Leica Summicron-C 40mm f2</title><link>https://www.hugoshih.com/p/%E7%8E%A9%E9%81%8D%E8%80%81%E9%8F%A1%E9%A0%AD-leica-summicron-c-40mm-f2/</link><pubDate>Fri, 22 Jul 2022 14:52:00 +0800</pubDate><guid>https://www.hugoshih.com/p/%E7%8E%A9%E9%81%8D%E8%80%81%E9%8F%A1%E9%A0%AD-leica-summicron-c-40mm-f2/</guid><description>&lt;img src="https://i.imgur.com/rx11Znm.jpg" alt="Featured image of post 玩遍老鏡頭 - Leica Summicron-C 40mm f2" />&lt;h1 id="玩遍老鏡頭---leica-summicron-c-40mm-f2">玩遍老鏡頭 - Leica Summicron-C 40mm f2&lt;/h1>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>在這個時代窮學生想要玩M系統有很多選擇，便宜實惠的七工匠、銘匠；選擇多樣的voigtlader；畫質完全不輸Leica的Zeiss；甚至還有成群的上古時代M卡口、L39卡口老鏡可以選擇，50mm焦段大多數只要10000出頭就可以收的到，每一顆都很不錯，每一顆都充滿故事。&lt;/p>
&lt;p>2020年的某天下雨的午後，窩在暗房沖片，一邊與其他社員交流器材，還記得一位朋友神神秘秘的從包裡拿出他的Leica M3讓我摸摸，那沈甸甸的手感、扎實的快門，突然明白為何總說摸過了就回不去了，回去的好幾個晚上總是心心念念著這台相機，過了不久我也買了人生中第一台Leica底片相機，只是買下它就花了大部分的積蓄，只能夠&lt;del>隨便&lt;/del>弄一顆&lt;em>七工匠的35mm f2&lt;/em>來充充飢，即便外人說這顆鏡頭CP值有多高，心裡仍然很不滿足，也確實拍出來的照片也很普通，都用上Leica的機身了，怎麼也得搭一顆Leica原廠鏡頭，至少我想要感受感受什麼叫做「德味」什麼叫做Leica美學。&lt;/p>
&lt;p>後來就在網路上的交易平台遇到了這顆Leica Summicron-C 40mm f2，品項不算是太好，掉漆鍍膜刮傷等等的問題都有，價格也因此不太貴印象中是14000上下，實打實的德國製造、Leica卡設計。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/mWW7v7E.jpg" width="33%" alt="圖片說明" >&lt;img src="https://i.imgur.com/3OWj30N.jpg" width="33%" alt="圖片說明" >&lt;img src="https://i.imgur.com/lxz6JIR.jpg" width="33%" alt="圖片說明" >
&lt;/div>
&lt;h2 id="介紹">介紹&lt;/h2>
&lt;p>這顆鏡頭當初就是走一個低價路線，主要是設計給Leica當年的M系統平價款Leica CL使用，Leica CL也是相當有故事的一台相機，在Leica最落魄的年代與minolta合作生產有較多電子零件的機身以吸引用戶，希望讓更多人感受到Leica的魅力而購買Leica的其他產品，結果大眾反而只願意購買價格較低的Leica CL而不願意購買當年的Leica M5，只得讓Leica早早停產這台相機，而Summicron-C 40mm也只隨相機生產個幾代就停產了，雖然說只生產幾代，但產量還是蠻大的，至今市面上還算是容易看到，相較其他M機型更小的身形也讓很多人喜愛。&lt;/p>
&lt;p>&lt;img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Leica_CL_avec_Summicron-C.JPG/300px-Leica_CL_avec_Summicron-C.JPG"
loading="lazy"
>[1]&lt;/p>
&lt;p>隨然說是平價款，但這顆Summicron-C 40mm的成像還是不差，也算是比得上當時Leica的其他標準鏡，也因此大家寧可買這顆平價款，這顆鏡頭的用料也比得上Leica其他鏡頭，規格如下：&lt;/p>
&lt;ul>
&lt;li>編號：11542&lt;/li>
&lt;li>生產年份：1973-1979&lt;/li>
&lt;li>數量：54,350&lt;/li>
&lt;li>卡口：M mount&lt;/li>
&lt;li>鏡片：六片四組&lt;/li>
&lt;li>光圈：f/2 - f/16，10片&lt;/li>
&lt;li>重量：120g&lt;/li>
&lt;/ul>
&lt;p>說到這枚鏡頭有些人會稱之為&lt;em>小七枚&lt;/em>又或者是&lt;em>窮人的七枚玉&lt;/em>，無非是相似的焦度圖個美名，但個人認為跟真正的七枚玉仍有不少的差距，要說比較接近的話應該是Leica六枚玉，兩顆鏡頭同樣都是雙高斯6片4組的結構，生產年份也十分接近(1971-1979)在鍍膜的技術上應該也會十分接近，除了焦段差別兩顆鏡頭其實十分相似，只可惜六枚玉一直被人戲稱為八枚玉的cost down版本畢竟少了2片，而且產在Leica最落魄的年代，回到Summicron-C 40mm，用六枚玉1/2的價格買到媲美六枚玉的光學，不香嗎。銘環上的C字標示了的他的命運，很難不讓人想到&lt;del>Cheap&lt;/del>，就像iPhone 5c一樣(現在能說出這台手機的人好像也不年輕了)。&lt;/p>
&lt;div align="center">
&lt;img src="http://www.l-camera-forum.com/leica-wiki.en/images/6/64/M-40f2-c.jpg" width="35%" alt="圖片說明" >&lt;img src="http://www.l-camera-forum.com/leica-wiki.en/images/thumb/f/f5/Sc402.jpg/80px-Sc402.jpg" width="15%" alt="圖片說明" >&lt;img src="http://www.l-camera-forum.com/leica-wiki.en/images/thumb/7/76/M35f2iii.jpg/250px-M35f2iii.jpg" width="26%" alt="圖片說明" >&lt;img src="http://www.l-camera-forum.com/leica-wiki.en/images/thumb/2/26/S352%2B%2B.jpg/120px-S352%2B%2B.jpg" width="20%" alt="圖片說明" >[2]
&lt;/div>
&lt;p>體積也是這枚鏡頭很大的優勢，這顆鏡頭完全可以被稱為餅乾頭，體積比Voigtlander出的那些Color-Skopar鏡頭還來的小，而且而且而且還有f2的光圈，據我所知，這應該也是Leica鏡頭群裡最小的Summicron鏡頭，不得不佩服Leica玩轉雙高斯結構的能力。&lt;/p>
&lt;p>由於他太優秀了(跟六枚玉太像了)，Leica不得不對他做了一點點小改造，一個是濾鏡口雖然通樣是39mm卻不能使用一般的39mm濾鏡而是使用特殊的S5.5螺距的濾鏡，不過要硬上一般39mm的濾鏡還是可以，只是可能會把螺牙弄壞，或是拆不下來，另外這顆鏡頭也搭配了遮光罩，不過是橡膠製的伸縮遮光罩，可能方便但真的很醜，我收鏡頭的時候沒有附這個遮光罩，有的話我大概也不會裝，後來找來了一個仿萊卡的遮光罩裝上去，外觀看起來就有模有樣，我是一個有遮光罩就覺不會用鏡頭蓋的人，在旁軸相機上鏡頭蓋忘記拿下來真的是惡夢，有遮光罩多少可以防止我摸到鏡片。&lt;/p>
&lt;p>另一個差別則是卡口，這顆鏡頭裝到M機身上的話會自動帶出50mm的匡線，有一說是Leica為了讓這枚鏡頭在M機上比較難用而做的小心機，不過這個小心機是可以透過一點手工將它避免的，也就是將圖片中最下面的插刀磨掉一點就可以讓他帶出35mm匡線了，Leica的35mm匡線是比較接近40mm焦段的，因此有35mm匡線會方便許多。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/ykBz44W.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/w4kOA9M.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>其他的差別像是對焦板手有別傳統的月牙改成一個奇特的三角形，光圈環帶有一點點的阻尼，不過Leica的鏡頭每一顆的光圈手感都不太一樣，即便是同一系列的鏡頭都有點差距，不愧是純手工組裝跟調教的鏡頭。
接下來就來看看這顆鏡頭實際拍攝的樣子吧。&lt;/p>
&lt;h2 id="實拍">實拍&lt;/h2>
&lt;p>先用Portra拍幾張，試試看最強的負片表現如何
&lt;img src="https://i.imgur.com/N7PsuhB.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/Tq0c1ZH.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/BvouQEu.jpg"
loading="lazy"
>&lt;/p>
&lt;p>可以發現在光線充足的情況下，鏡頭的銳度、散景基本上不需要擔心&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/DJW0eLt.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/h95Yg5B.jpg"
loading="lazy"
>&lt;/p>
&lt;p>在低光線下人像的表現依舊很不錯，可以注意的是光圈全開的時候，在亮部的地方會出現小小的光暈，可來自於那個年代鍍膜技術的缺陷，有人也會稱為聖光。&lt;/p>
&lt;p>在用valvia 100f拍幾張，試試看在正片上的表現
&lt;img src="https://i.imgur.com/pMlD9S0.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/CO0rIaQ.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/1vCx614.jpg"
loading="lazy"
>
在室內的表現也很不錯，顏色濃濃的韻味&lt;/p>
&lt;p>換個場景試試看風景照如何
&lt;img src="https://i.imgur.com/JCQqqHJ.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/CbsYOAf.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/X8mxpyc.jpg"
loading="lazy"
>&lt;/p>
&lt;p>最後是在Provia 100f正片上的風景照&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/cL2urdu.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/OuvyS9w.jpg"
loading="lazy"
>
&lt;img src="https://i.imgur.com/2pexZV0.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="結語">結語&lt;/h2>
&lt;p>作為我的第一顆Leica鏡頭，他陪我走過許多地方，我也用他記錄下了許多回憶，不得不說他是一顆好鏡頭，也讓我透過他認識了Leica的美學，但他也有些許缺點，像是不近不遠的40mm焦段、聖光等等，後來入手了Summicron-M 35mm ASPH後就將Summicron-C 40mm轉售賣出了，畢竟兩者的光學表現還是有很大的差距，還是期待未來有一天有機會可以再買回來這個對我而言充滿回憶的鏡頭。&lt;/p>
&lt;h2 id="參考">參考&lt;/h2>
&lt;ul>
&lt;li>[1] &lt;a class="link" href="https://en.wikipedia.org/wiki/Leica_CL" target="_blank" rel="noopener"
>https://en.wikipedia.org/wiki/Leica_CL&lt;/a>&lt;/li>
&lt;li>[2] &lt;a class="link" href="http://www.l-camera-forum.com/leica-wiki.en/index.php/35mm_f/2_Summicron_III" target="_blank" rel="noopener"
>http://www.l-camera-forum.com/leica-wiki.en/index.php/35mm_f/2_Summicron_III&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>機械相機系列 - 哈蘇A12片盒上片方法</title><link>https://www.hugoshih.com/p/%E6%A9%9F%E6%A2%B0%E7%9B%B8%E6%A9%9F%E7%B3%BB%E5%88%97-%E5%93%88%E8%98%87a12%E7%89%87%E7%9B%92%E4%B8%8A%E7%89%87%E6%96%B9%E6%B3%95/</link><pubDate>Mon, 11 Jul 2022 17:10:00 +0800</pubDate><guid>https://www.hugoshih.com/p/%E6%A9%9F%E6%A2%B0%E7%9B%B8%E6%A9%9F%E7%B3%BB%E5%88%97-%E5%93%88%E8%98%87a12%E7%89%87%E7%9B%92%E4%B8%8A%E7%89%87%E6%96%B9%E6%B3%95/</guid><description>&lt;img src="https://i.imgur.com/e1gynu4.jpg" alt="Featured image of post 機械相機系列 - 哈蘇A12片盒上片方法" />&lt;h1 id="機械相機系列---哈蘇a12片盒上片方法">機械相機系列 - 哈蘇A12片盒上片方法&lt;/h1>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>前陣子被朋友推坑敗了一台哈蘇500cm + CB 60mm 3.5f，作為中片幅底片單眼相機，其機械結構的精妙不言而諭，即便不帶出去拿在手上把玩依舊很過癮，從觀景窗看出去，蔡司的光學之美展露無遺，唯一的缺點就是碩大的機身跟重量實在不太方便帶出門，買了好一陣子卻一直被我冰在防潮箱，最近終於下定決心要用它好好來拍照，心血來潮就記錄一下如何使用哈蘇A12片盒更換底片，對於初次使用哈蘇攝影的小白才驚覺還有許多細節需要注意，完全不如135底片相機來的無腦，一不小心就可能毀掉一捲底片跟辛苦累積的12張攝影作品。&lt;/p>
&lt;img src="https://i.imgur.com/mYSbGqS.jpg" width="100%">
&lt;p>從一位老師傅那裡收過來的黑色塗裝Hasselblad 500cm，一般人印象中的哈蘇有著銀色不銹鋼的外邊，有種古典工藝品之美，全黑的哈蘇則有種現代感也更為低調，CB 60mm 3.5f則是從品光攝影購入的原本是想搭個中規中矩的80mm，可惜當時市面上的80mm價格太過嚇人，CB 60mm算是CP質很高的選擇，銳度畸變都很完美，視角也接近135片幅的35mm鏡頭，不過實際拍攝給人的透視感就完全不同。&lt;/p>
&lt;h2 id="開始裝底片">開始裝底片&lt;/h2>
&lt;h3 id="拆片盒">拆片盒&lt;/h3>
&lt;div align="center">
&lt;img src="https://i.imgur.com/vC7wqpA.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/cTOmtCS.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>首先要做的是將片盒從機身上拆下來，將片盒上的圓鈕往圖片左邊的方向撥就可以解開卡楯將片盒拆下，&lt;strong>要注意如果豆腐刀沒有插回片盒上時卡楯是撥不動的&lt;/strong>，硬撥的話可能會造成機械損壞喔，片盒拆下來後要小心不要碰到機身後的兩片長得像門一樣的遮光板，否則弄壞造成漏光就不好玩了。&lt;/p>
&lt;h3 id="抽出上片機構">抽出上片機構&lt;/h3>
&lt;div align="center">
&lt;img src="https://i.imgur.com/xDQEHyP.jpg" width="36%" alt="圖片說明" >&lt;img src="https://i.imgur.com/B0KDczd.jpg" width="64%" alt="圖片說明" >
&lt;/div>
&lt;p>接下來要將裡面的上片機構取出來，&lt;strong>但在取出來之前務必先確定一下裡面是不是還有底片&lt;/strong>，如果有的話確認一下是不是已經完成回片，如果貿然取出上片機構的話會造成裡面底片漏光就慘了，再來只要將片盒一側的旋鈕從左邊的樣子轉成右邊的樣子在向外拉就可以將上片機構拉出來了，有時候可能會拉不出來，&lt;em>大多都是因為插刀叉反了卡住上片機構，所以記得插刀也是有方向性的&lt;/em>。&lt;/p>
&lt;h3 id="交換片軸">交換片軸&lt;/h3>
&lt;div align="center">
&lt;img src="https://i.imgur.com/iepOaK8.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/tY2pDPP.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>拆出來的上片機構長這樣，原來在左側的是舊的片軸，需要將他換到右邊去，&lt;em>所以舊的片軸不要弄丟&lt;/em>，如果弄丟也只能去&lt;del>找底片沖洗店家要了&lt;/del>，哈蘇的片盒在拍完後會將底片回卷到舊的片軸上，所有每次都回留下上一次拍的底片的片軸。&lt;/p>
&lt;h3 id="底片">底片&lt;/h3>
&lt;div align="center">
&lt;img src="https://i.imgur.com/IZCVPns.jpg" width="18%" alt="圖片說明" >&lt;img src="https://i.imgur.com/Ipbxo6M.jpg" width="18%" alt="圖片說明" >&lt;img src="https://i.imgur.com/bapytsW.jpg" width="32%" alt="圖片說明" >&lt;img src="https://i.imgur.com/NhSzGVp.jpg" width="32%" alt="圖片說明" >
&lt;/div>
&lt;p>今天要裝的是Kodak的&lt;strong>Portra 400&lt;/strong>底片，這捲應該是在底片種類越來越少的年代少數能讓人滿意的底片，色彩的寬容度與細緻度都比新的Gold 200還要好上許多，而且還有400度的ISO能提供比較高的快門速度，除了價格偏高外應該算是120彩色的首選了。&lt;/p>
&lt;p>拆開120底片包裝後，需要撕開底片外部的紙封條，拉出來的這一段其實不是底片而是背紙，是120底片和135底片最大的差別，120底片因為沒有片殼，要防止底片意外曝光就需要靠背紙遮光，真正的底片是夾在背紙中間，拉到某一個位置會將真正的底片一起拉出來，真正的底片跟背紙是用一段紙膠帶黏起來的，詳細的結構可以參考這篇：&lt;a class="link" href="https://www.mobile01.com/topicdetail.php?f=255&amp;amp;t=495917" target="_blank" rel="noopener"
>120底片結構&lt;/a>。&lt;/p>
&lt;h3 id="安裝底片">安裝底片&lt;/h3>
&lt;div align="center">
&lt;img src="https://i.imgur.com/NLR08ER.jpg" width="64%" alt="圖片說明" >&lt;img src="https://i.imgur.com/3PapKLP.jpg" width="36%" alt="圖片說明" >
&lt;/div>
&lt;p>首先我們將底片安裝到&lt;strong>右側&lt;/strong>原來放片軸的位置，請注意背紙拉出的&lt;strong>方向&lt;/strong>，是從下方拉出的，不要將底片的方向裝反，接著將背紙拉到上片機構的背面。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/cwIuRXY.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/Z73oXiK.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>將背紙繞到背面後，請注意在上片機構上有一個用來夾住背紙的結構，這個結構在拉出上片機構的時候是卡緊的，我們需要先將上片機構的旋鈕轉回原位這樣這個夾背紙的結構就會鬆開，才方便讓背紙從下面通過。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/7LBLhN5.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/47ezilB.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>背紙通過之後在將上片結構的旋鈕轉回開啟的狀態，這個結構就會再夾緊背紙。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/HluUKiO.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/L7Ti5uu.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>將背紙的末端穿過舊的片軸中心的孔洞。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/kkZv7mF.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/uCWNv1c.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>最後我們旋轉另一側片軸下方的旋鈕收緊背紙，持續旋轉直到新底片側出現&lt;strong>START箭頭&lt;/strong>(不一定有START)，這個箭頭會對齊片盒上的紅色箭頭，這樣就完成底片的安裝了。&lt;/p>
&lt;h3 id="裝回上片機構">裝回上片機構&lt;/h3>
&lt;div align="center">
&lt;img src="https://i.imgur.com/DQWH6WD.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/Ayrb96e.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>裝回的時候請注意上片機構旋鈕的位置，需要將夾背紙的機構收緊上片機構才裝的進片盒中，裝進去後再將旋鈕轉回原位完成上片機構的安裝。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/rj4iVee.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/rMNGTb7.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>哈蘇的片盒需要將底片預先捲至最後一張，可以理解為哈蘇片盒是從最後一張開始拍的，因此需要選轉片盒另一側的旋轉把手&lt;strong>直到片盒左下角的小窗出現數字1&lt;/strong>。&lt;/p>
&lt;div align="center">
&lt;img src="https://i.imgur.com/6AvUQsX.jpg" width="50%" alt="圖片說明" >&lt;img src="https://i.imgur.com/DSGryUW.jpg" width="50%" alt="圖片說明" >
&lt;/div>
&lt;p>最後將片盒裝回機身就可以開始拍攝了，&lt;strong>記得在裝回機身時確定機身已經是過片狀態了&lt;/strong>，否則裝上片盒再上片會讓底片少拍一張。&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/f3WEITW.jpg"
loading="lazy"
>
拍攝的時候要記得拔出片盒插刀，不然快門是按不下去的。&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/qQO5bVJ.jpg"
loading="lazy"
>
從觀景窗看出去的畫面，蔡司光學的成像真美呀。&lt;/p>
&lt;h2 id="實拍">實拍&lt;/h2>
&lt;p>附上一些Portra 400實拍的畫面給大家參考，紫羅蘭沖掃&lt;/p>
&lt;h4 id="遠東軟體園區正在蓋的google新大樓">遠東軟體園區正在蓋的Google新大樓&lt;/h4>
&lt;p>&lt;img src="https://i.imgur.com/EadfVtx.jpg"
loading="lazy"
>&lt;/p>
&lt;h4 id="google板橋辦公室門口的logo">Google板橋辦公室門口的Logo&lt;/h4>
&lt;p>&lt;img src="https://i.imgur.com/e1gynu4.jpg"
loading="lazy"
>&lt;/p>
&lt;h4 id="google板橋大樓">Google板橋大樓&lt;/h4>
&lt;p>&lt;img src="https://i.imgur.com/c5as5mB.jpg"
loading="lazy"
>&lt;/p>
&lt;h4 id="google辦公室樓下的貳樓餐廳">Google辦公室樓下的貳樓餐廳&lt;/h4>
&lt;p>&lt;img src="https://i.imgur.com/0FZUu7n.jpg"
loading="lazy"
>&lt;/p>
&lt;h4 id="內湖往野柳的小路">內湖往野柳的小路&lt;/h4>
&lt;p>&lt;img src="https://i.imgur.com/Wpy1WVq.jpg"
loading="lazy"
>&lt;/p>
&lt;h4 id="風櫃嘴的展望">風櫃嘴的展望&lt;/h4>
&lt;p>&lt;img src="https://i.imgur.com/BZ8hN1n.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="a12片盒的一些奇淫巧技">A12片盒的一些奇淫巧技&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.huiminchi.com/%E5%93%88%E8%98%87hasselblad-a12-%E7%89%87%E5%A4%BE%E6%8B%8D%E6%94%9D%E7%AC%AC13%E5%BC%B5/" target="_blank" rel="noopener"
>A12片盒偷13張&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.photosharp.com.tw/FORUM/ArticleList.aspx?ForumId=4&amp;amp;TopicId=114634" target="_blank" rel="noopener"
>片盒序號不一致&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Docker使用小筆記</title><link>https://www.hugoshih.com/p/docker%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%AD%86%E8%A8%98/</link><pubDate>Mon, 30 May 2022 14:56:58 +0800</pubDate><guid>https://www.hugoshih.com/p/docker%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%AD%86%E8%A8%98/</guid><description>&lt;img src="https://i.imgur.com/5vmDYCZ.jpg" alt="Featured image of post Docker使用小筆記" />&lt;h1 id="docker使用小筆記">Docker使用小筆記&lt;/h1>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>Docker可以說是雲端技術中非常重要的一項專案，這個專案實現了Container技術，使得軟體的執行可以不在受系統環境限制，更加速了雲端技術中Microservice概念的發展，以下就簡單介紹常用的Docker指令。&lt;/p>
&lt;h2 id="基本操作">基本操作&lt;/h2>
&lt;ul>
&lt;li>離開但不關閉container：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">crtl+p crtl+q
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>連著打&lt;/p>
&lt;ul>
&lt;li>查看container列表&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker container ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>進入container&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker attach &amp;lt;ID&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>關閉container&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo container stop &amp;lt;ID&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="docker-image操作">Docker Image操作&lt;/h2>
&lt;ul>
&lt;li>查看image列表&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker image ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>下載image&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker pull &amp;lt;hub path&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Run&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker run &amp;lt;--gpus all&amp;gt; &amp;lt;-it&amp;gt; &amp;lt;-p 80&lt;span class="o">(&lt;/span>&lt;span class="nb">local&lt;/span>&lt;span class="o">)&lt;/span>:80&lt;span class="o">(&lt;/span>docker&lt;span class="o">)&lt;/span>&amp;gt; &amp;lt;-v /data&lt;span class="o">(&lt;/span>&lt;span class="nb">local&lt;/span>&lt;span class="o">)&lt;/span>:/data&lt;span class="o">(&lt;/span>docker&lt;span class="o">)&lt;/span> &amp;lt;images&amp;gt; &amp;lt;command&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>image commit&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker commit &amp;lt;ID&amp;gt; &amp;lt;images name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="reference">Reference&lt;/h2>
&lt;p>&lt;a class="link" href="https://larrylu.blog/step-by-step-dockerize-your-app-ecd8940696f4" target="_blank" rel="noopener"
>https://larrylu.blog/step-by-step-dockerize-your-app-ecd8940696f4&lt;/a>&lt;/p>
&lt;ul>
&lt;li>在沒有sudo權限使用docker：
&lt;a class="link" href="https://docs.docker.com/engine/security/rootless/" target="_blank" rel="noopener"
>https://docs.docker.com/engine/security/rootless/&lt;/a>&lt;/li>
&lt;li>docker儲存：
&lt;a class="link" href="https://peihsinsu.gitbooks.io/docker-note-book/content/docker-save-image.html" target="_blank" rel="noopener"
>https://peihsinsu.gitbooks.io/docker-note-book/content/docker-save-image.html&lt;/a>&lt;/li>
&lt;li>docker run 操作：
&lt;a class="link" href="https://noob.tw/docker-basic/" target="_blank" rel="noopener"
>https://noob.tw/docker-basic/&lt;/a>&lt;/li>
&lt;li>docker port：
&lt;a class="link" href="https://www.runoob.com/docker/docker-run-command.html" target="_blank" rel="noopener"
>https://www.runoob.com/docker/docker-run-command.html&lt;/a>&lt;/li>
&lt;li>nvidia docker：
&lt;a class="link" href="https://gitlab.com/nvidia/container-images/cuda/blob/master/doc/supported-tags.md" target="_blank" rel="noopener"
>https://gitlab.com/nvidia/container-images/cuda/blob/master/doc/supported-tags.md&lt;/a>
&lt;a class="link" href="https://www.celantur.com/blog/run-cuda-in-docker-on-linux/" target="_blank" rel="noopener"
>https://www.celantur.com/blog/run-cuda-in-docker-on-linux/&lt;/a>
&lt;a class="link" href="https://docs.docker.com/engine/reference/commandline/run/#access-an-nvidia-gpu" target="_blank" rel="noopener"
>https://docs.docker.com/engine/reference/commandline/run/#access-an-nvidia-gpu&lt;/a>
error解法：
&lt;a class="link" href="https://github.com/NVIDIA/nvidia-docker/issues/1243" target="_blank" rel="noopener"
>https://github.com/NVIDIA/nvidia-docker/issues/1243&lt;/a>&lt;/li>
&lt;li>x11 firefox docker：
&lt;a class="link" href="https://stackoverflow.com/questions/16296753/can-you-run-gui-applications-in-a-docker-container" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/16296753/can-you-run-gui-applications-in-a-docker-container&lt;/a>&lt;/li>
&lt;li>指令大全：
&lt;a class="link" href="https://github.com/docker-library/php/issues/359" target="_blank" rel="noopener"
>https://github.com/docker-library/php/issues/359&lt;/a>&lt;/li>
&lt;li>沒有中文的解法：
&lt;a class="link" href="https://github.com/docker-library/php/issues/359" target="_blank" rel="noopener"
>https://github.com/docker-library/php/issues/359&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Linux終端機視窗管理工具tmux筆記</title><link>https://www.hugoshih.com/p/linux%E7%B5%82%E7%AB%AF%E6%A9%9F%E8%A6%96%E7%AA%97%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7tmux%E7%AD%86%E8%A8%98/</link><pubDate>Mon, 30 May 2022 13:32:31 +0800</pubDate><guid>https://www.hugoshih.com/p/linux%E7%B5%82%E7%AB%AF%E6%A9%9F%E8%A6%96%E7%AA%97%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7tmux%E7%AD%86%E8%A8%98/</guid><description>&lt;img src="https://i.imgur.com/s6DO9W0.jpg" alt="Featured image of post Linux終端機視窗管理工具tmux筆記" />&lt;h1 id="linux終端機視窗管理工具tmux筆記">Linux終端機視窗管理工具tmux筆記&lt;/h1>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>一般在操作遠端的Linux主機時通常會使用SSH連線進去操作，然而若遇到需要執行一個不可中斷的指令但又不得不中斷SSH連線時，一般情況下會將該Process拉到背景執行或是使用視窗管理工具&lt;code>screen&lt;/code>，而&lt;code>tmux&lt;/code>則是另一個非常強大的視窗管理工具，可以在終端機中模擬視窗操作，包括視窗的切換、視窗的切割等等，以下就列出一些&lt;code>tmux&lt;/code>常用到的一些指令。&lt;/p>
&lt;h2 id="基本">基本&lt;/h2>
&lt;p>進入tmux&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">tmux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>列出tmux視窗列表&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tmux ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>連接tmux使窗&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tmux attach -t 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tmux attach -t database
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>建立一個名為database的視窗&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Bash" data-lang="Bash">&lt;span class="line">&lt;span class="cl">tmux new -s database
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更改名稱&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">tmux rename-session -t 0 database
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>水平切割&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>垂直切割&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>建立新視窗&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上一個視窗&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下一個視窗&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>依照編號直接切換（編號顯示於狀態列）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>視窗選單&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ctrl+b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>滑動視窗&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">crtl+b [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">q (離開)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="進階">進階&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 新增
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># OR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux new -s &amp;lt;your_session_name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># session 列表
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 重新連線 session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux a -t 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># OR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux a -t &amp;lt;session_name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 刪除 session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux kill-session -t 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># OR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux kill-session -t &amp;lt;session_name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># OR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux kill-session -a # 全部
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 刪除 tmux server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux kill-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 重新命名 session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tmux rename-session -t 0 &amp;lt;new_session_name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 快捷鍵/視窗管理
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b ? Help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b c 新增視窗
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b， 視窗命名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b w 視窗列表
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b f 尋找視窗
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b &amp;amp; 刪除視窗
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b % 垂直分割區塊
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b “ 水平分割區塊
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b &amp;lt;方向鍵&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b p 上一個視窗
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b n 下一個視窗
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b &amp;lt;number&amp;gt; 依照編號直接切換（編號顯示於狀態列）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b d 離開 session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b x 關閉 Pane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-d 關閉 Pane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># C-b z 讓一個 Pane 變成全螢幕，在輸入一次則回到剛剛的尺寸
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>ssh自動連進tmux
&lt;a class="link" href="https://stackoverflow.com/questions/27613209/how-to-automatically-start-tmux-on-ssh-session" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/27613209/how-to-automatically-start-tmux-on-ssh-session&lt;/a>&lt;/li>
&lt;li>與iterm結合
&lt;a class="link" href="https://medium.com/@wancw/iterm2-ssh-tmux-73d3fcf9dac6" target="_blank" rel="noopener"
>https://medium.com/@wancw/iterm2-ssh-tmux-73d3fcf9dac6&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Google Interview Leetcode Question Challenge</title><link>https://www.hugoshih.com/p/google-interview-leetcode-question-challenge/</link><pubDate>Mon, 30 May 2022 11:41:18 +0800</pubDate><guid>https://www.hugoshih.com/p/google-interview-leetcode-question-challenge/</guid><description>&lt;img src="https://www.hugoshih.com/p/google-interview-leetcode-question-challenge/IMG_4879.jpg" alt="Featured image of post Google Interview Leetcode Question Challenge" />&lt;h1 id="google-interview-challenge">Google Interview Challenge&lt;/h1>
&lt;p>&lt;a class="link" href="https://www.1111.com.tw/1000w/fanshome/discussTopic.asp?cat=FANS&amp;amp;id=301667" target="_blank" rel="noopener"
>https://www.1111.com.tw/1000w/fanshome/discussTopic.asp?cat=FANS&amp;id=301667&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.gushiciku.cn/pl/gyQP/zh-tw" target="_blank" rel="noopener"
>https://www.gushiciku.cn/pl/gyQP/zh-tw&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed" target="_blank" rel="noopener"
>https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.google.com/spreadsheets/d/1yRCOJ8KysRVkq0O9IlDriT01tC6lzPapmFO4PCmDJQA/edit#gid=126913158" target="_blank" rel="noopener"
>https://docs.google.com/spreadsheets/d/1yRCOJ8KysRVkq0O9IlDriT01tC6lzPapmFO4PCmDJQA/edit#gid=126913158&lt;/a>
Google面試準備
刷題類型&lt;/p>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> Arrays&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Binary Search Tree&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Binary Tree&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Dynamic Programming&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Greedy&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Graph – BFS、DFS&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Heap&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> LinkedList&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Recursion&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Searching – Binary Search、Quick Select&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Stack&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> String&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Sorting&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Topological sorting&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Trie&lt;/li>
&lt;/ul>
&lt;p>Google面試經典題目&lt;/p>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> coin change&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> coin change 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Unique path&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Unique path 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Permutation&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Permutation 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> subset&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> subset 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> search in rotated sorted array&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> search in rotated sorted array 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> word break&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> word break 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> jump game&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> jump game 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> word search&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> word search 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> combination&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> combination 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> meeting room&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> meeting room 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> number of islands&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> number of islands 2&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> number of distinct island&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> number of distinct island 2&lt;/li>
&lt;/ul>
&lt;p>BQ準備
Imagine you worked in a project or a team that had a problematic culture
Tell about the leading experience of a group project
Thinking about a time you were given a large amount of work to complete under the tight deadline
Tell about a time you face a problem without having clear solution
How do you solve the conflict that happen in the team&lt;/p>
&lt;h2 id="blind-75">Blind 75&lt;/h2>
&lt;h3 id="array">Array&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/two-sum/" target="_blank" rel="noopener"
>Two Sum&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener"
>Best Time to Buy and Sell Stock&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/contains-duplicate/" target="_blank" rel="noopener"
>Contains Duplicate&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/product-of-array-except-self/" target="_blank" rel="noopener"
>Product of Array Except Self&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/maximum-subarray/" target="_blank" rel="noopener"
>Maximum Subarray&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/maximum-product-subarray/" target="_blank" rel="noopener"
>Maximum Product Subarray&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/find-minimum-in-rotated-sorted-array/" target="_blank" rel="noopener"
>Find Minimum in Rotated Sorted Array&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/search-in-rotated-sorted-array/" target="_blank" rel="noopener"
>Search in Rotated Sorted Array&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/3sum/" target="_blank" rel="noopener"
>3 Sum&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/container-with-most-water/" target="_blank" rel="noopener"
>Container With Most Water&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="binary">Binary&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/sum-of-two-integers/" target="_blank" rel="noopener"
>Sum of Two Integers&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener"
>Number of 1 Bits&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/counting-bits/" target="_blank" rel="noopener"
>Counting Bits&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/missing-number/" target="_blank" rel="noopener"
>Missing Number&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/reverse-bits/" target="_blank" rel="noopener"
>Reverse Bits&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="dynamic-programming">Dynamic Programming&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/climbing-stairs/" target="_blank" rel="noopener"
>Climbing Stairs&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/coin-change/" target="_blank" rel="noopener"
>Coin Change&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-increasing-subsequence/" target="_blank" rel="noopener"
>Longest Increasing Subsequence&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-common-subsequence/" target="_blank" rel="noopener"
>Longest Common Subsequence&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/word-break/" target="_blank" rel="noopener"
>Word Break Problem&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/combination-sum-iv/" target="_blank" rel="noopener"
>Combination Sum&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/house-robber/" target="_blank" rel="noopener"
>House Robber&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/house-robber-ii/" target="_blank" rel="noopener"
>House Robber II&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/decode-ways/" target="_blank" rel="noopener"
>Decode Ways&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/unique-paths/" target="_blank" rel="noopener"
>Unique Paths&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/jump-game/" target="_blank" rel="noopener"
>Jump Game&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="graph">Graph&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/clone-graph/" target="_blank" rel="noopener"
>Clone Graph&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/course-schedule/" target="_blank" rel="noopener"
>Course Schedule&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/pacific-atlantic-water-flow/" target="_blank" rel="noopener"
>Pacific Atlantic Water Flow&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/number-of-islands/" target="_blank" rel="noopener"
>Number of Islands&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-consecutive-sequence/" target="_blank" rel="noopener"
>Longest Consecutive Sequence&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/alien-dictionary/" target="_blank" rel="noopener"
>Alien Dictionary (Leetcode Premium)&lt;/a> (H) Key: directed graph + DFS or BFS&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/graph-valid-tree/" target="_blank" rel="noopener"
>Graph Valid Tree (Leetcode Premium)&lt;/a> (M) Key: Check edges number first and then check unconnected component (Graph theory), Union Find!&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph/" target="_blank" rel="noopener"
>Number of Connected Components in an Undirected Graph (Leetcode Premium)&lt;/a> (M)&lt;/li>
&lt;/ul>
&lt;h3 id="interval">Interval&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/insert-interval/" target="_blank" rel="noopener"
>Insert Interval&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/merge-intervals/" target="_blank" rel="noopener"
>Merge Intervals&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/non-overlapping-intervals/" target="_blank" rel="noopener"
>Non-overlapping Intervals&lt;/a> (M) Key: greedy&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/meeting-rooms/" target="_blank" rel="noopener"
>Meeting Rooms (Leetcode Premium)&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/meeting-rooms-ii/" target="_blank" rel="noopener"
>Meeting Rooms II (Leetcode Premium)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="linked-list">Linked List&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/reverse-linked-list/" target="_blank" rel="noopener"
>Reverse a Linked List&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/linked-list-cycle/" target="_blank" rel="noopener"
>Detect Cycle in a Linked List&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/merge-two-sorted-lists/" target="_blank" rel="noopener"
>Merge Two Sorted Lists&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/merge-k-sorted-lists/" target="_blank" rel="noopener"
>Merge K Sorted Lists&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/remove-nth-node-from-end-of-list/" target="_blank" rel="noopener"
>Remove Nth Node From End Of List&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/reorder-list/" target="_blank" rel="noopener"
>Reorder List&lt;/a> (M)&lt;/li>
&lt;/ul>
&lt;h3 id="matrix">Matrix&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/set-matrix-zeroes/" target="_blank" rel="noopener"
>Set Matrix Zeroes&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/spiral-matrix/" target="_blank" rel="noopener"
>Spiral Matrix&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/rotate-image/" target="_blank" rel="noopener"
>Rotate Image&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/word-search/" target="_blank" rel="noopener"
>Word Search&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="string">String&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-substring-without-repeating-characters/" target="_blank" rel="noopener"
>Longest Substring Without Repeating Characters&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-repeating-character-replacement/" target="_blank" rel="noopener"
>Longest Repeating Character Replacement&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/minimum-window-substring/" target="_blank" rel="noopener"
>Minimum Window Substring&lt;/a> (H) Key: Optimized Sliding Windows!&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/valid-anagram/" target="_blank" rel="noopener"
>Valid Anagram&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/group-anagrams/" target="_blank" rel="noopener"
>Group Anagrams&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/valid-parentheses/" target="_blank" rel="noopener"
>Valid Parentheses&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/valid-palindrome/" target="_blank" rel="noopener"
>Valid Palindrome&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-palindromic-substring/" target="_blank" rel="noopener"
>Longest Palindromic Substring&lt;/a> Key: Manacher&amp;rsquo;s Algorithm&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/palindromic-substrings/" target="_blank" rel="noopener"
>Palindromic Substrings&lt;/a> (M) Key: Manacher&amp;rsquo;s Algorithm&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/encode-and-decode-strings/" target="_blank" rel="noopener"
>Encode and Decode Strings (Leetcode Premium)&lt;/a> (M)&lt;/li>
&lt;/ul>
&lt;h3 id="tree">Tree&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/maximum-depth-of-binary-tree/" target="_blank" rel="noopener"
>Maximum Depth of Binary Tree&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/same-tree/" target="_blank" rel="noopener"
>Same Tree&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/invert-binary-tree/" target="_blank" rel="noopener"
>Invert/Flip Binary Tree&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/binary-tree-maximum-path-sum/" target="_blank" rel="noopener"
>Binary Tree Maximum Path Sum&lt;/a> (H)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/binary-tree-level-order-traversal/" target="_blank" rel="noopener"
>Binary Tree Level Order Traversal&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/serialize-and-deserialize-binary-tree/" target="_blank" rel="noopener"
>Serialize and Deserialize Binary Tree&lt;/a> (H)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/subtree-of-another-tree/" target="_blank" rel="noopener"
>Subtree of Another Tree&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/" target="_blank" rel="noopener"
>Construct Binary Tree from Preorder and Inorder Traversal&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/validate-binary-search-tree/" target="_blank" rel="noopener"
>Validate Binary Search Tree&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/kth-smallest-element-in-a-bst/" target="_blank" rel="noopener"
>Kth Smallest Element in a BST&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/" target="_blank" rel="noopener"
>Lowest Common Ancestor of BST&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/implement-trie-prefix-tree/" target="_blank" rel="noopener"
>Implement Trie (Prefix Tree)&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/add-and-search-word-data-structure-design/" target="_blank" rel="noopener"
>Add and Search Word&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/word-search-ii/" target="_blank" rel="noopener"
>Word Search II&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="heap">Heap&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/merge-k-sorted-lists/" target="_blank" rel="noopener"
>Merge K Sorted Lists&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/top-k-frequent-elements/" target="_blank" rel="noopener"
>Top K Frequent Elements&lt;/a> (M)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/find-median-from-data-stream/" target="_blank" rel="noopener"
>Find Median from Data Stream&lt;/a> (H)&lt;/li>
&lt;/ul>
&lt;h2 id="tips">Tips&lt;/h2>
&lt;p>&lt;a class="link" href="https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed" target="_blank" rel="noopener"
>https://hackernoon.com/14-patterns-to-ace-any-coding-interview-question-c5bb3357f6ed&lt;/a>&lt;/p>
&lt;h2 id="funny-one">Funny One&lt;/h2>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/count-unique-characters-of-all-substrings-of-a-given-string" target="_blank" rel="noopener"
>Count Unique Characters of All Substrings of a Given String&lt;/a> Key: really special solution&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/find-the-duplicate-number/" target="_blank" rel="noopener"
>Find the Duplicate Number&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/find-leaves-of-binary-tree/" target="_blank" rel="noopener"
>Find Leaves of Binary Tree&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/split-array-largest-sum/" target="_blank" rel="noopener"
>Split Array Largest Sum&lt;/a> Key: Binary Search!!!&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/trapping-rain-water/" target="_blank" rel="noopener"
>Trapping Rain Water&lt;/a>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/the-skyline-problem/" target="_blank" rel="noopener"
>The Skyline Problem&lt;/a> Key: Select the building with heapqueue&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/largest-rectangle-in-histogram/solution/" target="_blank" rel="noopener"
>Largest Rectangle in Histogram&lt;/a> Key: tricky Apply with stack!!!&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/subtree-of-another-tree/" target="_blank" rel="noopener"
>Subtree of Another Tree&lt;/a> Key: Markle Hash&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/substring-with-concatenation-of-all-words/" target="_blank" rel="noopener"
>Substring with Concatenation of All Words&lt;/a> Key: Sliding Window&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/longest-valid-parentheses/" target="_blank" rel="noopener"
>Longest Valid Parentheses&lt;/a> key: Two pointer or DP or Stack&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener"
>Best Time to Buy and Sell Stock IV&lt;/a> Key: Tricky One pass solution (DP or O(k) space)&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/design-hashset/discuss/?currentPage=1&amp;amp;orderBy=most_votes&amp;amp;query=&amp;amp;tag=python" target="_blank" rel="noopener"
>Design HashSet&lt;/a> Key: Multiplicative hashing&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/unique-binary-search-trees/solution/" target="_blank" rel="noopener"
>Unique Binary Search Trees&lt;/a> Key: Catalan number!&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/shortest-path-in-a-grid-with-obstacles-elimination/" target="_blank" rel="noopener"
>Shortest Path in a Grid with Obstacles Elimination&lt;/a> Key: BFS + A*&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/student-attendance-record-ii/" target="_blank" rel="noopener"
>Student Attendance Record II&lt;/a> Key: hardhard DP&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/guess-the-word/" target="_blank" rel="noopener"
>Guess the Word&lt;/a> Key: Game theroy, compare with previous&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/min-cost-to-connect-all-points/" target="_blank" rel="noopener"
>Min Cost to Connect All Points&lt;/a> Key: minmun spanning tree!! (Prim&amp;rsquo;s or )&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/path-with-minimum-effort/" target="_blank" rel="noopener"
>Path With Minimum Effort&lt;/a> Key: Binary search space&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a class="link" href="https://leetcode.com/problems/132-pattern/" target="_blank" rel="noopener"
>132 Pattern&lt;/a> Key: stack+min array&lt;/li>
&lt;/ul></description></item><item><title>我的台大魔幻之夜之路</title><link>https://www.hugoshih.com/p/%E6%88%91%E7%9A%84%E5%8F%B0%E5%A4%A7%E9%AD%94%E5%B9%BB%E4%B9%8B%E5%A4%9C%E4%B9%8B%E8%B7%AF/</link><pubDate>Sun, 19 May 2019 16:50:00 +0800</pubDate><guid>https://www.hugoshih.com/p/%E6%88%91%E7%9A%84%E5%8F%B0%E5%A4%A7%E9%AD%94%E5%B9%BB%E4%B9%8B%E5%A4%9C%E4%B9%8B%E8%B7%AF/</guid><description>&lt;img src="https://i.imgur.com/wlZs4Hc.jpg" alt="Featured image of post 我的台大魔幻之夜之路" />&lt;h1 id="我的台大魔幻之夜之路">我的台大魔幻之夜之路&lt;/h1>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>睽違三年再一次坐在台下欣賞台大魔夜
有別於當上下桌、表演者、核幹時看魔夜的各種緊張
我又再一次被這奇幻的晚會感動
回想大一時初次踏入社課看著鼎皓變著馬戲團騙術
轉眼間即將披上領巾準備畢業
四年來魔術社是家、是生活的重心、是不可分割的一部分
那麼就以這篇心得文來總結一下吧&lt;/p>
&lt;h2 id="魔夜之路">魔夜之路&lt;/h2>
&lt;h3 id="起源">起源&lt;/h3>
&lt;p>故事的開始起源於高中時一位魔術社的學長給我看了化內在Le plus的影片
影片放著 而他滔滔不絕的說著：
在遙遠的台大魔術社 有一群很厲害的魔術師 而且沒人知道為什麼他們這麼厲害
這讓我非常好奇
後來我得知這些人都曾上過台大魔幻之夜
那究竟是個怎麼樣的舞台呢 是不是真的跟傳聞一樣厲害？&lt;/p>
&lt;h3 id="19魔表演者聯盟">19魔《表演者聯盟》&lt;/h3>
&lt;p>機會很快的來臨 在寒假的Magic is Concept活動中意外的抽中了兩張19魔的門票
然後我遊說了詠辰還有社團的朋友一起去看
在那個只能看魔幻達人秀欣賞魔術的環境
台大魔幻之夜讓我看見魔術的新世界
九個厲害到爆表的表演和從頭讓人爆笑到尾的主持
這真是太厲害了 我總有一天一定要站上這個舞台&lt;/p>
&lt;h3 id="20魔lumos">20魔《Lumos》&lt;/h3>
&lt;p>高三下即使成為指考戰士 仍弄了張20魔的門票
無奈九點半只演完半場 只能打消看完魔夜的念頭
後來聽到下半場各種精彩 真的是十分後悔
若知道下一次能坐在台下看是四年後 大概會更後悔QQ&lt;/p>
&lt;h3 id="21魔21hero">21魔《21Hero》&lt;/h3>
&lt;p>然後就懞懞懂懂的上了台大
懞懞懂懂的加入了台大魔術社
懞懞懂懂的看著昀恆變魔術(昀恆抱歉QAQ我社課頗常消失…)
不知不覺的留給魔術的時間越來越少
直到有一天我還真的相信對魔術的熱情大概就到這了
然後詠辰突然告訴我他被找去當魔夜上下桌 在那裡他看到了很多厲害的東西
出於好奇 後來我也填了當上下桌 也很幸運的被選中
踏入二活這神聖的地方 我看見了許多不可思議的事
最初震撼我的是楊詒強到不行的表演
緊接著是各個表演者在長老日以繼夜的精雕細琢下
在極短的時間內快速的進化、蛻變 變成一個個屌炸天的表演
再次讓我相信 要成為台大魔夜的表演者並不是什麼遙不可及的夢想&lt;/p>
&lt;h3 id="22魔魔法師與他們的產地">22魔《魔法師與他們的產地》&lt;/h3>
&lt;p>在魔夜症候群的驅使下考了教學 接受了一整年當幹部的洗禮
算是補了之前當新生時沒學好的種種
然後匆匆忙忙的完成了甄選程序
過了甄選後浪費了到一驗前的時間 開啟了各種趕進度的魔夜之路
經過了五驗的崩潰後 終於完成了自己還算滿意的程序
最後站上了台大魔幻之夜的舞台 完成了高中時對自己得承諾
一路上要感謝的人太多了
首先一定要感謝辛苦的核幹們
感謝你們相信我能夠上魔夜 並給予我機會&lt;/p>
&lt;ul>
&lt;li>感謝 明翰 感謝你給我許多美感上的建議 還記得六驗後某一天我很崩潰時 你看我跑完後 默默的說了一句：跑的不錯 當下真的有種噴淚的衝動&lt;/li>
&lt;li>感謝 昀恆 感謝你給我許多動作上的建議 也給我許多燈光上的建議 你的嚴格絕對是我們進步的動力&lt;/li>
&lt;li>感謝 張騰 感謝你幫我解決道具上的疑難雜症 也感謝你時常鼓勵我給予精神上的支持&lt;/li>
&lt;li>感謝 芃雅 感謝你時常帶許多東西來給我們吃 每次看到你來都有種被救贖的感覺&lt;/li>
&lt;li>感謝 宣伯 在魔夜前期沒有方向的時候幾乎是以你的表演作為模板 也感謝後來不厭其煩的給我許多服裝上的建議 到了魔夜後期也花了不少時間幫我修程序 沒有你的幫忙我不可能生出這套程序&lt;/li>
&lt;li>感謝 彥彥 感謝你總是能在各種時候給予鼓勵 縱使課業很忙 也還是空出時間來幫我修程序 讓我的程序越來越符合我心目中的樣子&lt;/li>
&lt;li>感謝 小梅 給你修完之後總有突然進化的感覺 真的很喜歡你修的東西 也感謝你教我許多動作設計上的觀念 至今仍受用無窮&lt;/li>
&lt;li>感謝 柏誠 高中時期就幫助我很多的學長 感謝你魔夜時幫我解決各種手法上的難題&lt;/li>
&lt;li>感謝 化內 高中時期的偶像 雖然早就聽說你很嚴格 但我早已迫不及待請你幫我修程序了 感謝你幫我挑出許多動作上的瑕疵 也在程序初期決定方向時給了我許多很有用的建議&lt;/li>
&lt;li>感謝 小鬼 感謝你總是能詳細且面面俱到的回答各種問題 每次驗收後根據影片給予的意見也是受益無窮 也感謝你解決了一些道具上的問題&lt;/li>
&lt;li>感謝 En-Jui Shang 高中時期的偶像之二 感謝你抽空幫我修程序 你就如傳聞中一樣厲害 總能把看次普通的效果提升到另一個層次&lt;/li>
&lt;li>感謝 子袁 感謝你常常出現在二活看我跑程序 也總能在我跑完後給予不少建議&lt;/li>
&lt;li>感謝 小邱 感謝你總是默默出現在二活看我們練習 也總是不厭其煩的幫我們解決各種程序的bug&lt;/li>
&lt;li>感謝 凌宇 感謝你時常來二活給予我們鼓勵&lt;/li>
&lt;li>感謝 元廷 感謝你在程序初期給我許多建議&lt;/li>
&lt;li>感謝 楊詒 感謝你給了我許多跳脫框架的建議&lt;/li>
&lt;li>感謝 Michael Yang 感謝你在甄選前給予我道具上的意見&lt;/li>
&lt;li>感謝 白菜 感謝你抽空幫我修程序&lt;/li>
&lt;li>感謝 俊緯 感謝你在我做不出道具時給予協助&lt;/li>
&lt;li>感謝 晉豪 感謝你陪我一起研究各種電路 雖然最後沒有用到QQ&lt;/li>
&lt;li>感謝 Hsieh Kai Kai老師 感謝你能量滿滿的鼓勵&lt;/li>
&lt;li>感謝 御伶 感謝你時常來二活陪我們練習 有你在的時候二活總是充滿快活的氣氛&lt;/li>
&lt;li>感謝 昱先 在程序前期的時候很熱心的給我許多建議&lt;/li>
&lt;li>感謝教學組的各位 感謝每次預講的各種歡樂總能紓解魔夜時的壓力&lt;/li>
&lt;li>感謝 詠辰 能認識你真的太好了 從高中互相鼓勵一起上成發 到大學互相提攜一起上魔夜 不的不說你真的給了我很多上魔夜的動力 期待未來能我們能在各方面繼續發光發熱&lt;/li>
&lt;li>感謝 How Jiun Hsu 感謝你當教學長總是那麼carry 也很佩服你在魔術上總有無窮無盡的想法&lt;/li>
&lt;li>感謝 昌錦 總是在預講時提出許多想法&lt;/li>
&lt;li>感謝 宣諭 感謝你總是那麼認真努力 激起了對魔術的熱血&lt;/li>
&lt;li>感謝 杰勵 感謝你的各種梗 總能讓人會心一笑&lt;/li>
&lt;li>感謝22魔的大家 感謝 祐增、 翁鈞、 德彥(BIMF加油餒)、 Davin Dai、 彥霓、 宥任、 孟豪、 晴晨、 皓屏 因為有你們 22魔才可以如此精彩&lt;/li>
&lt;/ul>
&lt;p>感謝台大眾多長老們的幫忙 我才得以站在台上 所有幫助過我的長老我都銘記在心
經歷過了魔夜才明白一人單打獨鬥是不足以撐起魔夜的
魔夜是長老們集體智慧的結晶 少了一點就不會如此完美了&lt;/p>
&lt;h3 id="23魔不能說的秘密">23魔《不能說的秘密》&lt;/h3>
&lt;p>又一次魔夜症候群發作 我接下了核幹
十分感謝上一屆核幹相信我能夠勝任這份工作
當核幹是我在魔術社裡學到最多東西的地方
包括各種行政事務、危機處理
如何辦好一場活動、如何規劃一場好的晚會
如何帶領一屆表演者 從什麼都不會到最後站上台大魔夜的舞台
而過程仍舊是要感謝台大眾多長老的幫忙&lt;/p>
&lt;h4 id="感謝核幹夥伴">感謝核幹夥伴&lt;/h4>
&lt;ul>
&lt;li>感謝社長皓鈞 感謝你總是如此的carry讓人放心 所有無解的問題到了你的手上似乎自然有了答案&lt;/li>
&lt;li>感謝副社長宣諭 你細膩的心思總是能直接且俐落的給予表演者們心靈抑或是實質上的協助 也感謝你義無反顧的接下了舞台總監的位置&lt;/li>
&lt;li>感謝執秘彥霓 感謝你在處理行政事務上的不遺餘力 也感謝你總是能給予表演者們精神上的鼓勵&lt;/li>
&lt;/ul>
&lt;h4 id="感謝上屆核幹">感謝上屆核幹&lt;/h4>
&lt;ul>
&lt;li>感謝 昀恆 即便你課業繁忙 仍然投注大量的時間給魔術社 從給予表演者意見並協助表演者完成程序 到各種行政上的問題 沒有你23魔就不會如此順利&lt;/li>
&lt;li>感謝 張騰 依舊感謝你各種道具力的支援 以及魔夜當天燈控的各種協助 沒有你魔夜不會這麼好看&lt;/li>
&lt;li>感謝 明翰 感謝你協助宣傳品的製作 還有幫忙做帥翻天的開場片&lt;/li>
&lt;li>感謝 芃雅 感謝你各種行政上的支援&lt;/li>
&lt;/ul>
&lt;h4 id="感謝常回來的長老們">感謝常回來的長老們&lt;/h4>
&lt;ul>
&lt;li>感謝 胖子 感謝你為這屆表演者費盡心思 還有你的炸海苔&lt;/li>
&lt;li>感謝 白菜 感謝你時常回來幫忙盯表演者練習&lt;/li>
&lt;li>感謝 小邱 也是感謝你時常回來幫忙盯表演者練習&lt;/li>
&lt;li>感謝 詠辰 你就如同第五位核幹 處處協助著我們&lt;/li>
&lt;li>感謝所有長老在百忙中撥空回來協助表演者 沒有你們不會有23魔&lt;/li>
&lt;li>感謝 凱昇老師 你是台大魔夜的守護神&lt;/li>
&lt;/ul>
&lt;h4 id="最後恭喜各位23魔的表演者-恭喜你們完成目標站上台大魔夜的舞台-感謝你們的堅持">最後恭喜各位23魔的表演者 恭喜你們完成目標站上台大魔夜的舞台 感謝你們的堅持&lt;/h4>
&lt;ul>
&lt;li>感謝 荐泓 從什麼都不會的新生 到最終能獨當一面站上舞台的表演者 讓人看了真的很欣慰&lt;/li>
&lt;li>感謝 Aaron 你真的是天才 總是能自己想出許多有趣的演繹 也不太需要我們擔心&lt;/li>
&lt;li>感謝 家立 感謝持續不懈的努力 最終的表演也無愧於你的努力與長老的幫助&lt;/li>
&lt;li>感謝 晉璿 你絕對是23魔最認真的表演者 從暑假到甄選前的練習 你從未有過任何怠惰 而你流暢的表演至今讓我印象深刻 也是不太需要核幹擔心的表演者&lt;/li>
&lt;li>感謝 中漢 23魔喜劇擔當 比起帥氣的變魔術 搞笑大概更適合你 從準備甄選時就看得出你的積極 也很高興最後終於找對路 爆氣全場&lt;/li>
&lt;li>感謝 御伶 感謝你一直以來對台大魔術社的熱愛 也恭喜你最終完成一套屬於你的而謝非常精彩的表演&lt;/li>
&lt;li>感謝 雷邱 感謝你一直以來對魔術的熱情 也完成了一套相當厲害的程序 期待你之後的發展&lt;/li>
&lt;li>感謝 謙煜 又是一個天才 你的霸氣是自然流露出來的 真的很厲害 也感謝你撐起了壓軸這個位置 也最終爆氣全場相當精彩&lt;/li>
&lt;li>感謝主持 昱翔、 家儀、 晏榆 、 莎莎 感謝你們經常熬夜改劇本 也絞盡腦汁想出許多很不錯的梗 魔夜當天讓我從頭笑到尾 真的是非常好看的&lt;/li>
&lt;/ul>
&lt;p>當核幹輕不輕鬆 見仁見智
但壓力肯定是不會小的
畢竟一直以來台大魔夜以高水準著稱 而如今也輪到我們扛著這份壓力
但當看到最後的成果時 一切的付出皆值得了&lt;/p>
&lt;h3 id="24魔魔法師與理想國">24魔《魔法師與理想國》&lt;/h3>
&lt;p>卸下了核幹的身份
有更多的時間嘗試自己想嘗試的事物
睽違三年再一次坐在台下欣賞台大魔夜
回到了初學魔術時 那樣興奮又期待的心情
而看完魔夜的那份感動 讓人久久不能自已
果然只有台大魔夜才能超越台大魔夜
台大魔夜就如同一場好長好長的夢 當它醒來之後
你會知道是時候好好面對自己的人生了
感謝這屆的核幹
感謝富淼、師傅、Aaron、晏榆 感謝你們竭盡餘力撐起社團
感謝這屆表演者 感謝你們撐過了各種驗收與考驗 各種辛苦將化為甜美的果實 希望你們都有享受到這充滿奇幻與魅力的舞台
感謝所有長老、凱昇老師
我們又再一次完成如此好看的晚會&lt;/p>
&lt;h2 id="致謝">致謝&lt;/h2>
&lt;p>重要的人總是要放在最後
感謝父母
感謝你們容許我投注時間在魔術社上 僅管為了魔術社 已經很久沒有回家吃飯 很久沒有好好跟你們說話 你們卻不曾阻止過我 也感謝你們在能力有限的情況提供我資源 讓我有能力去嘗試 去挑戰 無論如何 你們才是我最該感謝的人
感謝 家儀
感謝你總是容許？我三不五時往魔術社跑
感謝你在我上魔夜時支持我專注於準備表演
感謝你在你上魔夜時沒有怨懟我時常要求你來練習
感謝你一直以來無條件的支持我、相信我
謝謝你
感謝 施星宇
感謝你堅強的心
感謝你不放棄的靈魂
最後感謝台大魔術社
當初的一個好奇 一不小心就花了四年的時間來探索
彷彿是一抸眼 卻說短也不短了
真的是一趟奇妙的旅程呢&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/cQu65bS.jpg"
loading="lazy"
alt="Image 1"
>
&lt;img src="https://i.imgur.com/LN83oiZ.jpg"
loading="lazy"
alt="Image 2"
> &lt;img src="https://i.imgur.com/XRTOcdZ.jpg"
loading="lazy"
alt="Image 3"
> &lt;img src="https://i.imgur.com/iFHUMJL.jpg"
loading="lazy"
alt="Image 4"
>&lt;/p></description></item><item><title>Datacube 函式筆記</title><link>https://www.hugoshih.com/p/datacube-%E5%87%BD%E5%BC%8F%E7%AD%86%E8%A8%98/</link><pubDate>Fri, 22 Mar 2019 00:58:25 +0800</pubDate><guid>https://www.hugoshih.com/p/datacube-%E5%87%BD%E5%BC%8F%E7%AD%86%E8%A8%98/</guid><description>&lt;img src="https://miro.medium.com/max/1400/0*dq7FvX_09B4zw8ZO" alt="Featured image of post Datacube 函式筆記" />&lt;h1 id="datacube-函式筆記-基礎">Datacube 函式筆記-基礎&lt;/h1>
&lt;h2 id="api函式">API函式&lt;/h2>
&lt;p>可以參考這個網站：https://nbviewer.jupyter.org/github/opendatacube/datacube-core/blob/develop/examples/notebooks/Datacube_Summary.ipynb
官方函式說明：https://datacube-core.readthedocs.io/en/latest/_modules/index.html
調整圖片顏色：http://xarray.pydata.org/en/stable/plotting.html
範例包：https://nbviewer.jupyter.org/github/opendatacube/datacube-core/tree/develop/examples/notebooks/
xarray用法：https://xarray.pydata.org/en/stable/generated/xarray.Dataset.html#xarray.Dataset
&lt;a class="link" href="https://xarray.pydata.org/en/stable/api.html#dataarray" target="_blank" rel="noopener"
>https://xarray.pydata.org/en/stable/api.html#dataarray&lt;/a>&lt;/p>
&lt;ol>
&lt;li>：Datacube class，建立一個Datacube項目，用來導入Datacube資料庫時會用到&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">datacube&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Datacube&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">env&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validate_connection&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>範例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">datacube&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">datacube&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Datacube&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;my_app&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">config&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;/home/localuser/.datacube.conf&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#基本上就看你用的Datacube裡面的資料位置在哪，建議直接用&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>：Datacube.list_products() &amp;amp; Datacube.list_measurements()&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;strong>Datacube.list_products()&lt;/strong>：列出所有的衛星資料&lt;/li>
&lt;li>&lt;strong>Datacube.list_measurements()&lt;/strong>：列出衛星資料所含有的波段種類&lt;/li>
&lt;/ul>
&lt;p>範例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">list_of_products&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list_products&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netCDF_products&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list_of_products&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">list_of_products&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;format&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;NetCDF&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netCDF_products&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#list_of_products的參數就照上面設，我也不知道差別在哪&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#印出來就一個表格&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">list_of_measurements&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list_measurements&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">list_of_measurements&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#可以直接印出來，印出來也是一個表格&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>：Datacube.load()，建立一個xarray.Dataset用來儲存要撈的資料的各種參數&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Datacube&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">measurements&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">output_crs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resolution&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">resampling&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dask_chunks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">like&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fuse_func&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">align&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">datasets&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">**&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>範例1：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">datetime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define geographic boundaries in (min, max) format&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用兩個變數來儲存要找的經緯度範圍(方框)，我也不知道多邊形怎麼用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lon&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">120.3697&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">120.5044&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">23.6686&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">23.7476&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define date range boundaries in (min,max) format&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用datetime格式來儲存要提取資料的時間範圍&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">date_range&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2017&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define product and platform to specify our intent to &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#load Landsat 8 sr products&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">platform&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;LANDSAT_8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 衛星資料的模板，其實可以不用打，要打就不要打錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;ls8_lasrc_taiwan&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用來辨識讀取哪一個衛星的資料，絕對不能打錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define desired bands. &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">desired_bands&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;green&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;blue&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;nir&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;swir1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;swir2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;pixel_qa&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 要提取的波段資料&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 以Landset8的話共有coastal_aerosol、blue、green、red、nir、swir1、swir2、&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># lwir1、lwir2、pixel_qa、sr_aerosol、radsat_qa這些波段，我們只提取了其中幾個，也可以在加&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 輸出的順序會按照陣列的裡的排列出現&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># load area. Should result in approximately 15 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#acquisitions between 2014 and 2016 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">landsat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">product&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">platform&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">platform&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lat&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">lon&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">date_range&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">measurements&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">desired_bands&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">landsat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後實際把資料load出來，回傳的格式是xarray.Dataset&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>範例2：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ls5_nbar_albers&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">148.15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">148.2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">35.15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">35.2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;1990&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;1991&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 時間座標等也可以用上面這種表示法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1516200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1541300&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3867375&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">3867350&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">crs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;EPSG:3577&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 也可以這樣，只是就要附註crs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 時間也可以用上面那種方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">output_crs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;EPSG:3577`, resolution=(-25, 25), resampling=&amp;#39;&lt;/span>&lt;span class="n">cubic&lt;/span>&lt;span class="s1">&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>：Datacube.find_datasets()、Datacube.group_datasets()、Datacube.load_data()&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;strong>Datacube.find_datasets()&lt;/strong>：列出符合條件的影像資料位置，以list方式回傳&lt;/li>
&lt;li>&lt;strong>Datacube.group_datasets()&lt;/strong>：將上面find_datasets()回傳的list裡的資料group起來，也可以自己弄一個符合格式的檔案路徑list，然後一樣嘢可幫你group起來&lt;/li>
&lt;li>&lt;strong>Datacube.load_data()&lt;/strong>：把剛剛group起來的資料load出來&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Datacube&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">find_datasets&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="n">search_terms&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 參數的部分要輸入一種特殊的Query型態，不過datacube怪怪的，不能import這種格式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 所以等下範例有直接輸入參數的方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Datacube&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group_datasets&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">datasets&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">group_by&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 放棄嘗試這個函式XDD 主要是不知道group_by參數要填什麼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 就是傳入上面那個find_datasets return 的東西&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 會回傳先前看到的xarray.DataArray格式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Datacube&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">geobox&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">measurements&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">resampling&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fuse_func&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dask_chunks&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skip_broken_datasets&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 也是放棄嘗試這個函式XDD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 傳入剛剛group_datasets弄好的xarray，然後傳出xarray.Dataset&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>範例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">find_datasets&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;ls8_lasrc_taiwan&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;2016-01-01&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;2017-01-01&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後就會回傳一個list，裡面有所有符合條件資料的位置&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>：加入crs資料
其實這步可以不用做，基本上就是把讀取的參數整合&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">xarray&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">xr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># xarray是用來儲存讀取資料的格式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">combined_dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">xr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">landsat&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy original crs to merged dataset &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">combined_dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">assign_attrs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">landsat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">combined_dataset&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>：實際撈資料&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">time&lt;/span> &lt;span class="c1"># 裡面有把時間轉為字串的函式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">rasterio&lt;/span> &lt;span class="c1"># 將點狀資料轉成圖塊&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">dc_utilities&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">write_geotiff_from_xr&lt;/span> &lt;span class="c1"># 這蠻重要的，可以將xr格式轉成geotiff格式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">time_to_string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 將時間轉為字串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y_%m_&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">_%H_%M_%S&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gmtime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1000000000&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 就採用`time.strftime`函數將時間轉為字串，等等用來加入檔名當中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">export_slice_to_geotiff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 將資料轉為實際的tiff檔案&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">write_geotiff_from_xr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">float32&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">landsat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">data_vars&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">()),&lt;/span>&lt;span class="n">crs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;EPSG:4326&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 在這裡引用了write_geotiff_from_xr()函數，path是新建的tiff檔案的路徑和檔名，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ds.astype(np.float32)是將原來資料裡的整數值轉為浮點數值，大概是因為這個函數只接受浮點數，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># list(landsat.data_vars.keys())則是將這裡面所有的屬性質(就是nir、red、blue那些)轉成list形式而已&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 最後crs就不必說惹，可以試一下怎麼直接從原來那個xarray.Dataset讀取這個資料，手動輸入實在很智障&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#For each time slice in a dataset we call export_slice_to_geotif&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">export_xarray_to_geotiff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">ds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># 接著就根據xarrayDataset.time裡面的時間資料list一筆一筆抓出來處理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time_slice_xarray&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 先是搞一個新的xarray，然後把裡面的time換成單一的值(有點像是從一層抽出一片的感覺)，以便等會用write_geotiff_from_xr轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">export_slice_to_geotiff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time_slice_xarray&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;_&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">time_to_string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;.tif&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 然後就呼叫export_slice_to_geotiff，其實就是write_geotiff_from_xr()函數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Start Export&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">output_dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/home/localuser/Datacube/data_cube_notebooks/NTUF_Hsing-Yu/ToTiffTest&amp;#34;&lt;/span> &lt;span class="c1"># 存檔的路徑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 資料夾存在就直接存，沒有就新建一個&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">makedirs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">export_xarray_to_geotiff&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">landsat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_dir&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;{}/{}&amp;#34;.format(output_dir,product)的用法還沒有研究&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>：資料繪圖plot()
在xarray.Dataset的格式下可以直接呼叫plot()函數匯出影像&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;strong>範例1：&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">green&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;1991-3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;1991-5&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 圖檔的話好像只能用單一波段繪圖， 所以這邊要選擇你要的波段&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這邊是選綠色，然後後面那邊可以設定時間區間，似乎也是可以不用設定！？&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="c1"># 看一下格式這樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 然後印出圖形，橫軸按照時間排列，每一排三個&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 印出來之後就向下圖這樣&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/LiOMvUZ.png"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>範例2：去除nodata的版本：&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_valid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">autumn&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># 新建一個變數，用來儲存去除nodata的資料&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_valid&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 然後一樣輸出&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/YZHQWlN.png"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>範例3：去除雲&lt;/strong>
在landsat5以後的衛星資料會提供一個pixelquality波段，通常是用來表示該相素的含雲量，有幾個特定的值是表示該像素是可以用的，不過我忘了&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ls5_pq_albers&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">149.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">149.35&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">35.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">35.35&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 一樣先load做出xarray.Dataset ，可以注意到這邊load的版本是ls5_pq_albers，跟前面load的nbar版本不一樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pq_autumn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixelquality&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;1991-3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;1991-5&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 然後一樣，只是改成以pixelquality波段作圖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pq_autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 顯示出來就像下面那樣&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/aUUzZnB.png"
loading="lazy"
>
可以注意到有特殊顏色的就是含雲量較高的像素，正常應該是黃色，所以等等要將這些有色區塊去除
這邊會用到masking工具，可以從datacube.storage中取出來&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">datacube.storage&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">masking&lt;/span> &lt;span class="c1"># 取出masking工具&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pandas&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">from_dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">masking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_flags_def&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pq&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">orient&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;index&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這裡的masking.get_flags_def(pq)，是從原來的xarray.Dataset找到如何判斷pixelquality值的表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後就會得到一個對照表&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">good_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">masking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">make_mask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pq&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cloud_acca&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;no_cloud&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cloud_fmask&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;no_cloud&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">contiguous&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 接下來要建立一個新的mask，mask上顏色不同的地方就是判定有雲的地方&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 根據前面的表，只要把cloud_acca和cloud_fmask這兩個變數都設為&amp;#39;no_cloud&amp;#39;，而contiguous=True則是表示這個pixel還含有其他波段，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 可以試試設成false會怎樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這樣就可以做出一個mask&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_good_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">good_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixelquality&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;1991-3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;1991-5&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 然後再一次實際套用到剛剛的xarray.Dataset上&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_good_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 印出來就如下圖&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/0o5VUvz.png"
loading="lazy"
>
可以發現，現在不是黃色就是紫色
最後拿去跟一開始有綠色波段且做過nodata處理的那張圖疊&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_cloud_free&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">autumn_valid&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">autumn_good_data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 就跟用來疊nodata的作法一樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 印出來就像下面那樣&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/4jtH7yl.png"
loading="lazy"
>
可以發現原本有雲的地方都變成無資料了，因為mask裡面，有雲的地方，數字被設為0，沒有雲的地方為1&lt;/p>
&lt;p>後來發現mask不給力，landsat8的資料不太能用，因此我就直接用where取出pixel_qa為322的資料
範例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">green&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">322&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 取值為322的資料，這是landsat8中品質最好的資料&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_valid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">autumn&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">autumn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 一樣清除nodata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn_valid&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 印出來就像下面那樣(顏色沒有調得很好XDD)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/jKdyrYy.png"
loading="lazy"
>&lt;/p>
&lt;ol start="7">
&lt;li>：將圖群組化(超重要！！)
有時候因為衛星軌道的關係，一個地區的影像會被切成兩三張圖放，用Group可將時間相近的圖整合成一張&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;strong>範例：&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">nbar_by_solar_day&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ls5_nbar_albers&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">149.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">149.35&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">35.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">35.35&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">group_by&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;solar_day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 大部分跟之前用load()的方式差不多，只是在最後加了group_by=&amp;#39;solar_day&amp;#39;就是根據太陽日的範圍群組化圖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nbar_by_solar_day&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 看一下圖是不是真的變少了&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nbar_by_solar_day&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">green&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;1991-3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;1991-5&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 一樣取出綠色的波段作圖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">autumn2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 一樣畫出圖，就變下面那樣&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/XJzQQ6L.png"
loading="lazy"
>
可以發現原來切掉的部分不見了！！！
8. ：算ndvi
就用red和nir這兩個波段算出ndvi，大概就是可以反映出地面物是不是植物這樣
red就是紅光，nir就是近紅外光&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">two_bands&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ls5_nbar_albers&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">149.07&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">149.17&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">35.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">35.35&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;1991&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;1992&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">measurements&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;nir&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">group_by&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;solar_day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 跟前面使用load()的方式差不多，不過這次要用measurements，同時只load&amp;#39;red&amp;#39;, &amp;#39;nir&amp;#39;這兩個波段，一樣要記得用group_by&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">red&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">two_bands&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">red&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">two_bands&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">red&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">two_bands&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">red&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># 然後去除nodata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">two_bands&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">two_bands&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nir&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">two_bands&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># 也是去除nodata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ls5_pq_albers&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">149.07&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">149.17&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">35.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mf">35.35&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;1991&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;1992&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">group_by&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;solar_day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後load另一個圖(是pq版本的)，等等用來做could free的mask&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cloud_free&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">masking&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">make_mask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pq&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cloud_acca&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;no_cloud&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cloud_fmask&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;no_cloud&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">contiguous&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixelquality&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用之前坐的那張圖做一個mask，一樣取出pixelquality的部分&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndvi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">nir&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">red&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">nir&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">red&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cloud_free&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 拿nir和red這兩張圖算一下ndvi，然後跟cloud_free疊加，去除雲的部分&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="c1"># 看一下資料量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 印出來，就像下面那樣&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/SsOBuDA.png"
loading="lazy"
>
其實還是有很多地方被切掉XDD，而且圖像的品質參差，接下來可以取出影像品質比較好的幾張，也就是含雲量較少的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_cloud_free&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dim&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">0.75&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 簡單來說就是找含雲量前25%少的圖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mostly_cloud_free&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dropna&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;all&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 然後拿去跟原來的疊，刪掉雲多的圖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 印出來&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/biR5vE2.png"
loading="lazy"
>
就發現只剩清晰的圖了
以下是我用先前桃園市的資料算的ndvi&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">red&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">red&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">red&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">red&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">322&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nir&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">322&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 跟上面差不多，取出red和nir兩個波段，然後用where取出pixel_qa為322的地方&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndvi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">nir&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">red&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">nir&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">red&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ndvi&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ndvi&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 套個ndvi的公式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 印出來&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/qAhJJWt.jpg"
loading="lazy"
>
接下來挑選一下雲含量比較少的圖&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">cloud_free&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;nodata&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">combined_dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pixel_qa&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">322&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">322&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這邊就用先前pixel_qa的圖，抓值為322的部分，rescale為1，偽造成一個mask&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#cloud_free.plot(col=&amp;#39;time&amp;#39;, col_wrap=3)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_cloud_free&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dim&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;latitude&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;longitude&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">0.75&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">cloud_free&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後去算裡面不是雲的資料的比例，其實就是把它加總這樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mostly_cloud_free&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dropna&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;all&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後疊一下圖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_wrap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 印出來&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/ilufKDH.png"
loading="lazy"
>
第一張圖估計是系統弄錯惹，都是雲，但值是322，將就著看吧
接下來ndvi還可以組一張中位數的圖，有點類似平均值的概念，可以看大範圍完整的樣子，不會受到圖片卻失的影響&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">median&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dim&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 就是取出每一個pixel的中位數，組成一張圖，這個函式還蠻厲害ㄉ&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/sIwU3Hr.png"
loading="lazy"
>
印出來就像這樣，顏色較深的地方大概就是沒有植物啦哈哈
p.s.為什麼不用平均數呢？因為平均數會受到nodata的影響
然後也可以做一張std的圖，表示變化程度&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dim&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 概念跟剛剛median差不多&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/7Nl2H8e.png"
loading="lazy"
>
顏色較淺的地方就是變化量較大的地方，ndvi會隨季節變化，這個大家都知道ㄉ，所以一樣，亮的地方就是有植物的地方&lt;/p>
&lt;p>然後也可以抓單一一點的ndvi變化，所以我隨便用google map選了一點
引用sel函式，後面輸入參數，可以讀出該座標上每個時間的值&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">latitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">24.958132&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">longitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">121.126085&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;nearest&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/Out4BAu.png"
loading="lazy"
>
畫出來的圖，某種程度上還是會受到nodata的影響&lt;/p>
&lt;p>下面這個是範例的奇妙用法，好像是抓出ndvi趨勢的感覺，詳細機制還要再研究&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">latitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">longitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 那個兩百我不知道是要幹嘛的，我有試試看其他值，但跑出來的圖都怪怪的&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/0iFxSwE.png"
loading="lazy"
>
這張圖就可以很明顯的看到ndvi的季節性變化了&lt;/p>
&lt;p>接下來也是範例的奇妙用法，可以固定緯度，將不同時間的情況列出來&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">longitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 30的意義好像是代表longitude的第30個pixel&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/bug1KLd.png"
loading="lazy"
>
這樣一比對還真的可以看出明顯的季節變化&lt;/p>
&lt;p>另外還可以抓出特定幾個點比較時間的影響&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mostly_good_ndvi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isel_points&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">latitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">50&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">longitude&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">50&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">60&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;points&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 同上那些數值也是以座標而言的第幾個點這樣&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/oEY66gD.png"
loading="lazy"
>&lt;/p>
&lt;ol start="9">
&lt;li>：多頻譜製圖(不是做成tif)
玩久了之後還是會想要做一張彩色的圖自爽一下
以下的方法就可以惹&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rgb&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">product&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">lon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lat&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">lat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">date_range&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">measurements&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;green&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;blue&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">group_by&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;solar_day&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dim&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;color&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transpose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;latitude&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;longitude&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;color&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 前面坐過很多次了，就不贅述，紅綠藍波段一定要load近來，load了其他波段我不知道會怎樣，有空再試試&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 後面就是新建一個dim為新的color&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rgb&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dims&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rgb&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 有沒有做這個zip其實沒差&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">fake_saturation&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這個是用來當作影像值得上限，超過就用3000取代&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clipped_visible&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rgb&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rgb&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">fake_saturation&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fillna&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fake_saturation&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 上面這邊就是這樣做，透過fillna()函式可以填入值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">max_val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">clipped_visible&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;latitude&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;longitude&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然後找最大的scale&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">scaled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">clipped_visible&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">max_val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 設定scaled&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">matplotlib&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">pyplot&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">plt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imshow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scaled&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 最後就印出來，記得要import該import的東西&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://i.imgur.com/ziPdkS2.png"
loading="lazy"
>
選了一張被雲遮比較少ㄉ&lt;/p>
&lt;ol start="10">
&lt;li>：將xarray.Dataarray製成Dataset
&lt;a class="link" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.to_dataset.html" target="_blank" rel="noopener"
>http://xarray.pydata.org/en/stable/generated/xarray.DataArray.to_dataset.html&lt;/a>
&lt;a class="link" href="https://stackoverflow.com/questions/38826505/python-xarray-add-dataarray-to-dataset" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/38826505/python-xarray-add-dataarray-to-dataset&lt;/a>&lt;/li>
&lt;li>：Dataarray or Dataset中的資料型別轉換
&lt;a class="link" href="http://xarray.pydata.org/en/stable/generated/xarray.DataArray.astype.html" target="_blank" rel="noopener"
>http://xarray.pydata.org/en/stable/generated/xarray.DataArray.astype.html&lt;/a>&lt;/li>
&lt;li>：不想要用.varibales的替代方案.get()
&lt;a class="link" href="https://github.com/pydata/xarray/issues/1801" target="_blank" rel="noopener"
>https://github.com/pydata/xarray/issues/1801&lt;/a>&lt;/li>
&lt;li>：將matplotlib畫出的東西輸出成png
&lt;a class="link" href="https://stackoverflow.com/questions/9622163/save-plot-to-image-file-instead-of-displaying-it-using-matplotlib" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/9622163/save-plot-to-image-file-instead-of-displaying-it-using-matplotlib&lt;/a>&lt;/li>
&lt;/ol>
&lt;h1 id="datacube-函式筆記-進階">Datacube 函式筆記-進階&lt;/h1>
&lt;ul>
&lt;li>WOFs&lt;/li>
&lt;/ul>
&lt;h1 id="datacube-函式筆記-其他">Datacube 函式筆記-其他&lt;/h1>
&lt;ul>
&lt;li>文件解壓縮
在可以使用sever Shell的情況下，通常將文件打包(.zip)上傳之後再用Linux下的unzip解壓縮，不過新版的jupyter介面將Shell的功能關惹，所以只能用python內建的函式庫解壓縮，程式如下：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="nn">zipfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">un_zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;unzip zip file&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zip_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zipfile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ZipFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;_files&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mkdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;_files&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">names&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">zip_file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">namelist&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zip_file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">extract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">file_name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;_files/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zip_file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">un_zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;utils.zip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用方式：先用%指令切換到正確的工作目錄，然後啟動run上面的程式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Python" data-lang="Python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">zipfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#打包目录为zip文件（未压缩）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">make_zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">source_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">output_filename&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zipf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zipfile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ZipFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pre_len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">source_dir&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">parent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dirnames&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">filenames&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">walk&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">source_dir&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">filename&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">filenames&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pathfile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">parent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">arcname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pathfile&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">pre_len&lt;/span>&lt;span class="p">:]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sep&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#相对路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zipf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pathfile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">arcname&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zipf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">make_zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s2">&amp;#34;E:\python_sample\libs\test_tar_files\libs&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;test.zip&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Jupyter使用終端機指令
雖然終止了shell的使用，但一樣可以在Jupyter使用Linux指令，不過一樣會受到權限限制
ex:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Bash" data-lang="Bash">&lt;span class="line">&lt;span class="cl">% ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">% &lt;span class="nb">cd&lt;/span> ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">% &lt;span class="nb">pwd&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>